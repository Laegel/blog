<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/12718d08b4275020.css" as="style"/><link rel="stylesheet" href="/_next/static/css/12718d08b4275020.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-cda2f1305c3d9424.js" defer=""></script><script src="/_next/static/chunks/main-f11614d8aa7ee555.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3c8296bcc80bf5fe.js" defer=""></script><script src="/_next/static/chunks/pages/technos/articles/%5Bslug%5D-257e5b07e5b9a75e.js" defer=""></script><script src="/_next/static/2cIfnXbK-LN1ukIOQ7QcV/_buildManifest.js" defer=""></script><script src="/_next/static/2cIfnXbK-LN1ukIOQ7QcV/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="technos min-h-screen flex flex-col" style="min-height:100vh"><main class="text-foreground flex-1 w-full max-w-screen-lg m-auto p-2 mb-4"><nav class="absolute left-0 top-0 h-12 w-full bg-primary"><div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8"><div class="relative flex items-center justify-between h-12"><div class="flex-1 flex items-center justify-left h-full"><div class="flex-shrink-0 flex items-center h-full"><a rel="nav" class="block h-full" href="/"><svg height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="135.91750488281252 12.788867187500003 228.16499023437498 124.422265625" style="background:none" preserveAspectRatio="xMidYMid"><defs><linearGradient id="editing-gradient-gradient" x1="0" x2="1" y1="0.5" y2="0.5" gradientUnits="objectBoundingBox"><stop offset="0" stop-color="#000"></stop><stop offset="1" stop-color="#000"></stop></linearGradient></defs><g><g transform="translate(172.3700008392334, 94.11999893188477)"><path d="M4.99 0L4.99-44.80L8.58-44.80L8.58-3.20L28.10-3.20L28.10 0L4.99 0ZM55.17 0L55.17 0Q48.26 0.70 45.18 0.70L45.18 0.70L45.18 0.70Q38.46 0.70 34.50-1.79L34.50-1.79L34.50-1.79Q30.53-4.29 30.53-10.82L30.53-10.82L30.53-16.13L30.53-16.13Q30.53-22.46 34.94-24.64L34.94-24.64L34.94-24.64Q37.06-25.73 40.32-25.73L40.32-25.73L40.32-25.73Q43.33-25.73 46.40-24.74L46.40-24.74L46.40-24.74Q49.47-23.74 51.58-22.14L51.58-22.14L51.58-22.14Q51.58-25.66 49.54-27.74L49.54-27.74L49.54-27.74Q47.49-29.82 41.66-29.82L41.66-29.82L41.86-32.58L41.86-32.58Q48-32.58 50.91-30.62L50.91-30.62L50.91-30.62Q53.82-28.67 54.50-25.98L54.50-25.98L54.50-25.98Q55.17-23.30 55.17-19.07L55.17-19.07L55.17 0ZM51.58-19.39L51.58-19.39Q48.96-20.61 45.98-21.50L45.98-21.50L45.98-21.50Q43.01-22.40 40.51-22.40L40.51-22.40L40.51-22.40Q34.05-22.40 34.05-15.94L34.05-15.94L34.05-10.37L34.05-10.37Q34.05-6.21 36.93-4.32L36.93-4.32L36.93-4.32Q39.81-2.43 45.12-2.43L45.12-2.43L45.12-2.43Q47.87-2.43 51.58-2.94L51.58-2.94L51.58-19.39ZM81.15-2.24L81.15-2.24Q78.85-0.77 75.90 0L75.90 0L75.90 0Q72.96 0.77 70.02 0.77L70.02 0.77L70.02 0.77Q65.28 0.77 62.50-1.57L62.50-1.57L62.50-1.57Q59.71-3.90 59.71-8.58L59.71-8.58L59.71-21.70L59.71-21.70Q59.71-26.88 62.94-29.76L62.94-29.76L62.94-29.76Q66.18-32.64 71.49-32.64L71.49-32.64L71.49-32.64Q76.80-32.64 79.78-29.79L79.78-29.79L79.78-29.79Q82.75-26.94 82.75-21.89L82.75-21.89L82.75-13.57L63.30-12.48L63.30-8.58L63.30-8.58Q63.30-5.50 65.28-3.97L65.28-3.97L65.28-3.97Q67.26-2.43 70.46-2.43L70.46-2.43L70.46-2.43Q74.94-2.43 79.74-4.99L79.74-4.99L81.15-2.24ZM79.17-22.34L79.17-22.34Q79.17-26.30 76.67-27.94L76.67-27.94L76.67-27.94Q74.18-29.57 71.42-29.57L71.42-29.57L71.42-29.57Q67.90-29.57 65.60-27.65L65.60-27.65L65.60-27.65Q63.30-25.73 63.30-21.63L63.30-21.63L63.30-16L79.17-16.77L79.17-22.34ZM103.94 10.69L103.94 10.69Q108.16 9.09 108.16 4.03L108.16 4.03L108.16-3.90L108.16-3.90Q105.47 0.77 99.52 0.77L99.52 0.77L99.52 0.77Q93.89 0.77 90.75-2.30L90.75-2.30L90.75-2.30Q87.62-5.38 87.62-11.26L87.62-11.26L87.62-20.80L87.62-20.80Q87.62-26.43 90.91-29.54L90.91-29.54L90.91-29.54Q94.21-32.64 99.78-32.64L99.78-32.64L99.78-32.64Q105.73-32.64 108.42-28.35L108.42-28.35L108.16-32.06L111.74-32.06L111.74 4.10L111.74 4.10Q111.74 7.94 110.14 10.11L110.14 10.11L110.14 10.11Q108.54 12.29 104.90 13.44L104.90 13.44L103.94 10.69ZM108.16-21.50L108.16-21.50Q108.16-25.47 105.60-27.42L105.60-27.42L105.60-27.42Q103.04-29.38 99.52-29.38L99.52-29.38L99.52-29.38Q96.13-29.38 93.66-27.30L93.66-27.30L93.66-27.30Q91.20-25.22 91.20-20.48L91.20-20.48L91.20-10.69L91.20-10.69Q91.20-6.66 93.47-4.61L93.47-4.61L93.47-4.61Q95.74-2.56 99.52-2.56L99.52-2.56L99.52-2.56Q103.10-2.56 105.63-4.77L105.63-4.77L105.63-4.77Q108.16-6.98 108.16-11.07L108.16-11.07L108.16-21.50ZM137.60-2.24L137.60-2.24Q135.30-0.77 132.35 0L132.35 0L132.35 0Q129.41 0.77 126.46 0.77L126.46 0.77L126.46 0.77Q121.73 0.77 118.94-1.57L118.94-1.57L118.94-1.57Q116.16-3.90 116.16-8.58L116.16-8.58L116.16-21.70L116.16-21.70Q116.16-26.88 119.39-29.76L119.39-29.76L119.39-29.76Q122.62-32.64 127.94-32.64L127.94-32.64L127.94-32.64Q133.25-32.64 136.22-29.79L136.22-29.79L136.22-29.79Q139.20-26.94 139.20-21.89L139.20-21.89L139.20-13.57L119.74-12.48L119.74-8.58L119.74-8.58Q119.74-5.50 121.73-3.97L121.73-3.97L121.73-3.97Q123.71-2.43 126.91-2.43L126.91-2.43L126.91-2.43Q131.39-2.43 136.19-4.99L136.19-4.99L137.60-2.24ZM135.62-22.34L135.62-22.34Q135.62-26.30 133.12-27.94L133.12-27.94L133.12-27.94Q130.62-29.57 127.87-29.57L127.87-29.57L127.87-29.57Q124.35-29.57 122.05-27.65L122.05-27.65L122.05-27.65Q119.74-25.73 119.74-21.63L119.74-21.63L119.74-16L135.62-16.77L135.62-22.34ZM146.69 0L146.69-44.80L150.27-44.80L150.27 0L146.69 0Z" fill="url(#editing-gradient-gradient)"></path></g></g></svg></a></div><div class="hidden sm:block sm:ml-6"><div class="flex space-x-4"><a rel="nav" class="text-background hover:bg-gray-700 hover:text-white px-3 py-3.5 text-sm font-medium" href="/technos">Technos</a><a rel="nav" class="text-background hover:bg-gray-700 hover:text-white px-3 py-3.5 text-sm font-medium" href="/idees">Idées</a><a rel="nav" class="text-background hover:bg-gray-700 hover:text-white px-3 py-3.5 text-sm font-medium" href="/divers">Divers</a></div></div></div><div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:ml-6 sm:pr-0"><div class="ml-3 relative"><div><a target="_blank" rel="noopener noreferrer" href="https://github.com/laegel"><svg class="text-background" viewBox="0 0 16 16" width="24" height="24" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div></div></div></div></div><div class="sm:hidden bg-primary" id="mobile-menu"><div class="px-2 pt-2 pb-3 space-y-1"><a rel="nav" class="text-background px-3 py-2 text-sm font-medium" href="/technos">Technos</a><a rel="nav" class="text-background px-3 py-2 text-sm font-medium" href="/idees">Idées</a><a rel="nav" class="text-background px-3 py-2 text-sm font-medium" href="/divers">Divers</a></div></div></nav><div class="mt-22 sm:mt-10 pt-10 page-content"><div><h1 class="text-5xl text-primary text-center font-bold mb-6 !leading-tight">Introduction au typage dans Python</h1><div class="text-center text-sm mb-4">Le 7 février 2022</div><p class="mb-4">Python, le langage dont la popularité ne cesse de croître de par sa facilité d&#39;apprentissage et d&#39;utilisation, catalogué comme LA technologie à utiliser en Machine Learning est, comme beaucoup d&#39;autres, un langage à typage dynamique. 
Le typage dynamique a ses avantages, c&#39;est indéniable : ça permet de développer rapidement en mettant de côté l&#39;inconvénient principal des langages statiques, à savoir (notamment) la déclaration explicite de type lors de la création d&#39;une variable, la rigidité de la gestion des arguments dans les fonctions et j&#39;en passe.</p>
        <h2 class="text-3xl text-primary mb-4">
          Quand et pourquoi ?
        </h2><p class="mb-4">Les propositions visant à théoriser puis introduire les annotations de type dans Python, les <a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://www.python.org/dev/peps/pep-0483/">PEP 483</a> et <a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>, ont été créées en 2014. Les propositions ont été étudiées et approuvées, permettant aux annotations de type de finalement faire leur apparition dans la version 3.5 des spécifications du langage.</p><p class="mb-4">L&#39;introduction du système de typage dans Python avait pour but, je cite (en traduisant) :</p><blockquote class="italic border-l-4 border-primary pl-2"><p class="mb-4">de simplifier l&#39;analyse statique et la refactorisation, de potentiellement vérifier le typage à l&#39;exécution du code et (dans certains contextes) de générer du code utilisant des informations de type.</p></blockquote><p class="mb-4">-- <a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://www.python.org/dev/peps/pep-0484/#rationale-and-goals">source</a></p><p class="mb-4">Dans cet article, je vais surtout m&#39;attarder sur l&#39;analyse statique et la refactorisation, deux techniques exploitées par les dévs au quotidien. <br>L&#39;analyse statique, c&#39;est tout ce qui nous permet de bénéficier d&#39;informations sur l&#39;utilisation de code. Vous voyez les infobulles de vos EDI, les vaguelettes lorsque vous avez mal orthographié une variable ? C&#39;est grâce à de l&#39;analyse statique qu&#39;elles sont pertinentes. <br>La refactorisation est un procédé qui vise à réduire la complexité du code, le rendre plus maintenable, plus efficace en fonction du besoin. Nous sommes amenés à refactoriser du code fréquemment et le typage sert de levier pour nous faciliter le travail.</p><p class="mb-4">A noter que d&#39;autres propositions (<a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://www.python.org/dev/peps/pep-0526/">PEP 526</a>) ont été ajoutées et d&#39;autres le seront dans l&#39;avenir afin d&#39;enrichir la fonctionnalité de base.</p>
        <h2 class="text-3xl text-primary mb-4">
          Comment ça fonctionne en pratique ?
        </h2>
      <h3 class="text-xl text-primary mb-2">
        Exemples simples d&#39;utilisation
      </h3><p class="mb-4">Le besoin de spécifier un type peut apparaître à plusieurs endroits dans le code.</p><p class="mb-4">En déclarant une variable :</p><pre><code class="language-py hljs mb-4 rounded-sm">name: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;Je contiens une chaîne&quot;</span>
</code></pre>
<p class="mb-4">Sur les propriétés d&#39;une structure de données :</p><pre><code class="language-py hljs mb-4 rounded-sm"><span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Post</span>:
    <span class="hljs-built_in">id</span>: <span class="hljs-built_in">int</span>
    title: <span class="hljs-built_in">str</span>
    content: <span class="hljs-built_in">str</span>
</code></pre>
<p class="mb-4">Sur les arguments et le retour d&#39;une fonction :</p><pre><code class="language-py hljs mb-4 rounded-sm"><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">arg1: <span class="hljs-built_in">int</span>, arg2: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> arg1 * arg2
</code></pre>

      <h3 class="text-xl text-primary mb-2">
        Typer, oui... mais pas n&#39;importe comment
      </h3><p class="mb-4">Dans les exemples précédents, j&#39;ai volontairement augmenté la verbosité du code afin de vous illustrer les possibilités.
Dans la réalité, il n&#39;est pas nécessaire de typer tout, tout le temps : la plupart des langages à typage static bénéficient de ce qu&#39;on appelle la déduction de type, grâce à l&#39;analyse statique. </p><p class="mb-4">Il est peu probable que vous deviez préciser le type d&#39;une variable que vous venez d&#39;assigner : </p><pre><code class="language-py hljs mb-4 rounded-sm">name = <span class="hljs-string">&quot;Je contiens une chaîne&quot;</span> <span class="hljs-comment"># Le type de `name` est déduit, c&#x27;est un `str`</span>
</code></pre>
<p class="mb-4">sauf si vous utilisez un alias :</p><pre><code class="language-py hljs mb-4 rounded-sm">Token = <span class="hljs-built_in">str</span>
token: Token = <span class="hljs-string">&quot;12345678&quot;</span> <span class="hljs-comment"># Le type a été explicité car il ne pouvait être déduit</span>
</code></pre>
<p class="mb-4">Vous n&#39;aurez pas non plus systématiquement besoin de typer les retours de fonctions :</p><pre><code class="language-py hljs mb-4 rounded-sm"><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">arg1: <span class="hljs-built_in">int</span>, arg2: <span class="hljs-built_in">int</span></span>): <span class="hljs-comment"># Le type du retour est déduit, c&#x27;est un `int`</span>
    <span class="hljs-keyword">return</span> arg1 * arg2
</code></pre>
<p class="mb-4">En fait, les seuls moments où ça va s&#39;avérer obligatoire, c&#39;est lorsqu&#39;on va devoir passer par de la définition de structures (telles que les <code>dataclass</code>) ou que les types sont trop ambigus ou inexistants, donc impossibles à déduire.</p>
        <h2 class="text-3xl text-primary mb-4">
          Des tas d&#39;outils pratiques pour travailler avec les types
        </h2><p class="mb-4">En quelques années, la communauté a eu le temps de mettre au point des outils pour se faciliter la vie.<br>Sachant qu&#39;il arrive souvent qu&#39;on utilise une bibliothèque non typée, certains outils peuvent s&#39;avérer particulièrement intéressants puisqu&#39;ils peuvent générer les types en lisant le code : ce sont des générateurs de types.
En voici un échantillon :</p><ul class="mb-4 list-disc pl-6"><li><a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="http://mypy-lang.org/">mypy</a>, outil d&#39;analyse statique, générateur de types</li>
<li><a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://pyre-check.org/">Pyre</a>, outil d&#39;analyse statique, générateur de types</li>
<li><a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://github.com/microsoft/pyright">Pyright</a>, outil d&#39;analyse statique, générateur de types + <a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://github.com/microsoft/pylance-release">Pylance</a>, son extension VS Code</li>
<li><a class="text-primary underline underline-offset-1" target="_blank" rel="noreferrer noopener nofollow" href="https://github.com/Instagram/MonkeyType">MonkeyType</a>, générateur de types</li>
</ul><hr class="!my-6 m-auto text-primary max-w-screen-md"/><p class="mb-4">Les annotations en Python ne servent qu&#39;à un seul objectif : <strong>rendre le code plus clair, plus explicite</strong>. Il n&#39;a <em>pas le moindre effet bénéfique lors de son exécution</em> et n&#39;améliore en rien ses performances (les imports des types vont plutôt les réduire de manière <em>négligeable</em>). Bien que leur introduction remonte à 2014, les annotations de type de Python ne sont pas aussi approfondies que ce qu&#39;on pourrait trouver avec TypeScript ou Rust et on peut rapidement se retrouver limité, par exemple avec les types génériques.</p><p class="mb-4">Le point final n&#39;est pas de trancher sur le fait de favoriser un langage à typage statique par rapport à un langage à typage dynamique. A travers cette fonctionnalité, Python se rend plus versatile et, à mon avis, <strong>plus facile à maintenir</strong> dans de grosses applications et ce avec un excellent compromis temps/information grâce à la déduction de type. </p><p class="mb-4">Utilisez-vous les annotations de type dans vos projets Python ? Si non, qu&#39;est-ce qui vous ferait changer d&#39;avis ? <br>Au contraire, voyez-vous des inconvénients majeurs contre leur utilisation ?</p></div></div><div class="giscus"></div></main><footer class="h-24 w-full bg-primary"><div class="h-6 relative"><div class="h-full bg-cover" style="background-image:url(/images/technos.jpg)"></div><div class="bg-primary opacity-40 absolute w-full h-full top-0 left-0"></div></div><div class="h-18"><div class="m-auto max-w-screen-lg flex items-center"><div class="mr-2 flex-1"><a href="https://github.com/Laegel/blog" class="inline-block mt-2" target="_blank" style="width:100px" rel="noreferrer"><svg height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="135.91750488281252 12.788867187500003 228.16499023437498 124.422265625" style="background:none" preserveAspectRatio="xMidYMid"><defs><linearGradient id="editing-gradient-gradient" x1="0" x2="1" y1="0.5" y2="0.5" gradientUnits="objectBoundingBox"><stop offset="0" stop-color="#000"></stop><stop offset="1" stop-color="#000"></stop></linearGradient></defs><g><g transform="translate(172.3700008392334, 94.11999893188477)"><path d="M4.99 0L4.99-44.80L8.58-44.80L8.58-3.20L28.10-3.20L28.10 0L4.99 0ZM55.17 0L55.17 0Q48.26 0.70 45.18 0.70L45.18 0.70L45.18 0.70Q38.46 0.70 34.50-1.79L34.50-1.79L34.50-1.79Q30.53-4.29 30.53-10.82L30.53-10.82L30.53-16.13L30.53-16.13Q30.53-22.46 34.94-24.64L34.94-24.64L34.94-24.64Q37.06-25.73 40.32-25.73L40.32-25.73L40.32-25.73Q43.33-25.73 46.40-24.74L46.40-24.74L46.40-24.74Q49.47-23.74 51.58-22.14L51.58-22.14L51.58-22.14Q51.58-25.66 49.54-27.74L49.54-27.74L49.54-27.74Q47.49-29.82 41.66-29.82L41.66-29.82L41.86-32.58L41.86-32.58Q48-32.58 50.91-30.62L50.91-30.62L50.91-30.62Q53.82-28.67 54.50-25.98L54.50-25.98L54.50-25.98Q55.17-23.30 55.17-19.07L55.17-19.07L55.17 0ZM51.58-19.39L51.58-19.39Q48.96-20.61 45.98-21.50L45.98-21.50L45.98-21.50Q43.01-22.40 40.51-22.40L40.51-22.40L40.51-22.40Q34.05-22.40 34.05-15.94L34.05-15.94L34.05-10.37L34.05-10.37Q34.05-6.21 36.93-4.32L36.93-4.32L36.93-4.32Q39.81-2.43 45.12-2.43L45.12-2.43L45.12-2.43Q47.87-2.43 51.58-2.94L51.58-2.94L51.58-19.39ZM81.15-2.24L81.15-2.24Q78.85-0.77 75.90 0L75.90 0L75.90 0Q72.96 0.77 70.02 0.77L70.02 0.77L70.02 0.77Q65.28 0.77 62.50-1.57L62.50-1.57L62.50-1.57Q59.71-3.90 59.71-8.58L59.71-8.58L59.71-21.70L59.71-21.70Q59.71-26.88 62.94-29.76L62.94-29.76L62.94-29.76Q66.18-32.64 71.49-32.64L71.49-32.64L71.49-32.64Q76.80-32.64 79.78-29.79L79.78-29.79L79.78-29.79Q82.75-26.94 82.75-21.89L82.75-21.89L82.75-13.57L63.30-12.48L63.30-8.58L63.30-8.58Q63.30-5.50 65.28-3.97L65.28-3.97L65.28-3.97Q67.26-2.43 70.46-2.43L70.46-2.43L70.46-2.43Q74.94-2.43 79.74-4.99L79.74-4.99L81.15-2.24ZM79.17-22.34L79.17-22.34Q79.17-26.30 76.67-27.94L76.67-27.94L76.67-27.94Q74.18-29.57 71.42-29.57L71.42-29.57L71.42-29.57Q67.90-29.57 65.60-27.65L65.60-27.65L65.60-27.65Q63.30-25.73 63.30-21.63L63.30-21.63L63.30-16L79.17-16.77L79.17-22.34ZM103.94 10.69L103.94 10.69Q108.16 9.09 108.16 4.03L108.16 4.03L108.16-3.90L108.16-3.90Q105.47 0.77 99.52 0.77L99.52 0.77L99.52 0.77Q93.89 0.77 90.75-2.30L90.75-2.30L90.75-2.30Q87.62-5.38 87.62-11.26L87.62-11.26L87.62-20.80L87.62-20.80Q87.62-26.43 90.91-29.54L90.91-29.54L90.91-29.54Q94.21-32.64 99.78-32.64L99.78-32.64L99.78-32.64Q105.73-32.64 108.42-28.35L108.42-28.35L108.16-32.06L111.74-32.06L111.74 4.10L111.74 4.10Q111.74 7.94 110.14 10.11L110.14 10.11L110.14 10.11Q108.54 12.29 104.90 13.44L104.90 13.44L103.94 10.69ZM108.16-21.50L108.16-21.50Q108.16-25.47 105.60-27.42L105.60-27.42L105.60-27.42Q103.04-29.38 99.52-29.38L99.52-29.38L99.52-29.38Q96.13-29.38 93.66-27.30L93.66-27.30L93.66-27.30Q91.20-25.22 91.20-20.48L91.20-20.48L91.20-10.69L91.20-10.69Q91.20-6.66 93.47-4.61L93.47-4.61L93.47-4.61Q95.74-2.56 99.52-2.56L99.52-2.56L99.52-2.56Q103.10-2.56 105.63-4.77L105.63-4.77L105.63-4.77Q108.16-6.98 108.16-11.07L108.16-11.07L108.16-21.50ZM137.60-2.24L137.60-2.24Q135.30-0.77 132.35 0L132.35 0L132.35 0Q129.41 0.77 126.46 0.77L126.46 0.77L126.46 0.77Q121.73 0.77 118.94-1.57L118.94-1.57L118.94-1.57Q116.16-3.90 116.16-8.58L116.16-8.58L116.16-21.70L116.16-21.70Q116.16-26.88 119.39-29.76L119.39-29.76L119.39-29.76Q122.62-32.64 127.94-32.64L127.94-32.64L127.94-32.64Q133.25-32.64 136.22-29.79L136.22-29.79L136.22-29.79Q139.20-26.94 139.20-21.89L139.20-21.89L139.20-13.57L119.74-12.48L119.74-8.58L119.74-8.58Q119.74-5.50 121.73-3.97L121.73-3.97L121.73-3.97Q123.71-2.43 126.91-2.43L126.91-2.43L126.91-2.43Q131.39-2.43 136.19-4.99L136.19-4.99L137.60-2.24ZM135.62-22.34L135.62-22.34Q135.62-26.30 133.12-27.94L133.12-27.94L133.12-27.94Q130.62-29.57 127.87-29.57L127.87-29.57L127.87-29.57Q124.35-29.57 122.05-27.65L122.05-27.65L122.05-27.65Q119.74-25.73 119.74-21.63L119.74-21.63L119.74-16L135.62-16.77L135.62-22.34ZM146.69 0L146.69-44.80L150.27-44.80L150.27 0L146.69 0Z" fill="url(#editing-gradient-gradient)"></path></g></g></svg></a></div><a href="https://github.com/Laegel/" target="_blank" rel="noopener noreferrer" class="inline-block mr-4"><svg class="inline-block text-background" viewBox="0 0 16 16" width="24" height="24" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a><a href="https://www.linkedin.com/in/valentin-chouaf/" target="_blank" rel="noopener noreferrer" class="inline-block mr-2 text-background"><svg class="inline-block" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><g fill="none"><path d="M0 18.338C0 8.216 8.474 0 18.92 0h218.16C247.53 0 256 8.216 256 18.338v219.327C256 247.79 247.53 256 237.08 256H18.92C8.475 256 0 247.791 0 237.668V18.335z" fill="currentColor"></path><path d="M77.796 214.238V98.986H39.488v115.252H77.8zM58.65 83.253c13.356 0 21.671-8.85 21.671-19.91-.25-11.312-8.315-19.915-21.417-19.915-13.111 0-21.674 8.603-21.674 19.914 0 11.06 8.312 19.91 21.169 19.91h.248zM99 214.238h38.305v-64.355c0-3.44.25-6.889 1.262-9.346 2.768-6.885 9.071-14.012 19.656-14.012 13.858 0 19.405 10.568 19.405 26.063v61.65h38.304v-66.082c0-35.399-18.896-51.872-44.099-51.872-20.663 0-29.738 11.549-34.78 19.415h.255V98.99H99.002c.5 10.812-.003 115.252-.003 115.252z" fill="white"></path></g></svg></a></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\u003ch1 class=\"text-5xl text-primary text-center font-bold mb-6 !leading-tight\"\u003eIntroduction au typage dans Python\u003c/h1\u003e\u003cdiv class=\"text-center text-sm mb-4\"\u003eLe 7 février 2022\u003c/div\u003e\u003cp class=\"mb-4\"\u003ePython, le langage dont la popularité ne cesse de croître de par sa facilité d\u0026#39;apprentissage et d\u0026#39;utilisation, catalogué comme LA technologie à utiliser en Machine Learning est, comme beaucoup d\u0026#39;autres, un langage à typage dynamique. \nLe typage dynamique a ses avantages, c\u0026#39;est indéniable : ça permet de développer rapidement en mettant de côté l\u0026#39;inconvénient principal des langages statiques, à savoir (notamment) la déclaration explicite de type lors de la création d\u0026#39;une variable, la rigidité de la gestion des arguments dans les fonctions et j\u0026#39;en passe.\u003c/p\u003e\n        \u003ch2 class=\"text-3xl text-primary mb-4\"\u003e\n          Quand et pourquoi ?\n        \u003c/h2\u003e\u003cp class=\"mb-4\"\u003eLes propositions visant à théoriser puis introduire les annotations de type dans Python, les \u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://www.python.org/dev/peps/pep-0483/\"\u003ePEP 483\u003c/a\u003e et \u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://www.python.org/dev/peps/pep-0484/\"\u003ePEP 484\u003c/a\u003e, ont été créées en 2014. Les propositions ont été étudiées et approuvées, permettant aux annotations de type de finalement faire leur apparition dans la version 3.5 des spécifications du langage.\u003c/p\u003e\u003cp class=\"mb-4\"\u003eL\u0026#39;introduction du système de typage dans Python avait pour but, je cite (en traduisant) :\u003c/p\u003e\u003cblockquote class=\"italic border-l-4 border-primary pl-2\"\u003e\u003cp class=\"mb-4\"\u003ede simplifier l\u0026#39;analyse statique et la refactorisation, de potentiellement vérifier le typage à l\u0026#39;exécution du code et (dans certains contextes) de générer du code utilisant des informations de type.\u003c/p\u003e\u003c/blockquote\u003e\u003cp class=\"mb-4\"\u003e-- \u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://www.python.org/dev/peps/pep-0484/#rationale-and-goals\"\u003esource\u003c/a\u003e\u003c/p\u003e\u003cp class=\"mb-4\"\u003eDans cet article, je vais surtout m\u0026#39;attarder sur l\u0026#39;analyse statique et la refactorisation, deux techniques exploitées par les dévs au quotidien. \u003cbr\u003eL\u0026#39;analyse statique, c\u0026#39;est tout ce qui nous permet de bénéficier d\u0026#39;informations sur l\u0026#39;utilisation de code. Vous voyez les infobulles de vos EDI, les vaguelettes lorsque vous avez mal orthographié une variable ? C\u0026#39;est grâce à de l\u0026#39;analyse statique qu\u0026#39;elles sont pertinentes. \u003cbr\u003eLa refactorisation est un procédé qui vise à réduire la complexité du code, le rendre plus maintenable, plus efficace en fonction du besoin. Nous sommes amenés à refactoriser du code fréquemment et le typage sert de levier pour nous faciliter le travail.\u003c/p\u003e\u003cp class=\"mb-4\"\u003eA noter que d\u0026#39;autres propositions (\u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://www.python.org/dev/peps/pep-0526/\"\u003ePEP 526\u003c/a\u003e) ont été ajoutées et d\u0026#39;autres le seront dans l\u0026#39;avenir afin d\u0026#39;enrichir la fonctionnalité de base.\u003c/p\u003e\n        \u003ch2 class=\"text-3xl text-primary mb-4\"\u003e\n          Comment ça fonctionne en pratique ?\n        \u003c/h2\u003e\n      \u003ch3 class=\"text-xl text-primary mb-2\"\u003e\n        Exemples simples d\u0026#39;utilisation\n      \u003c/h3\u003e\u003cp class=\"mb-4\"\u003eLe besoin de spécifier un type peut apparaître à plusieurs endroits dans le code.\u003c/p\u003e\u003cp class=\"mb-4\"\u003eEn déclarant une variable :\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-py hljs mb-4 rounded-sm\"\u003ename: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\u0026quot;Je contiens une chaîne\u0026quot;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp class=\"mb-4\"\u003eSur les propriétés d\u0026#39;une structure de données :\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-py hljs mb-4 rounded-sm\"\u003e\u003cspan class=\"hljs-meta\"\u003e@dataclass\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e:\n    \u003cspan class=\"hljs-built_in\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e\n    title: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\n    content: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp class=\"mb-4\"\u003eSur les arguments et le retour d\u0026#39;une fonction :\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-py hljs mb-4 rounded-sm\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emultiply\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003earg1: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e, arg2: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e\u003c/span\u003e) -\u0026gt; \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e:\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e arg1 * arg2\n\u003c/code\u003e\u003c/pre\u003e\n\n      \u003ch3 class=\"text-xl text-primary mb-2\"\u003e\n        Typer, oui... mais pas n\u0026#39;importe comment\n      \u003c/h3\u003e\u003cp class=\"mb-4\"\u003eDans les exemples précédents, j\u0026#39;ai volontairement augmenté la verbosité du code afin de vous illustrer les possibilités.\nDans la réalité, il n\u0026#39;est pas nécessaire de typer tout, tout le temps : la plupart des langages à typage static bénéficient de ce qu\u0026#39;on appelle la déduction de type, grâce à l\u0026#39;analyse statique. \u003c/p\u003e\u003cp class=\"mb-4\"\u003eIl est peu probable que vous deviez préciser le type d\u0026#39;une variable que vous venez d\u0026#39;assigner : \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-py hljs mb-4 rounded-sm\"\u003ename = \u003cspan class=\"hljs-string\"\u003e\u0026quot;Je contiens une chaîne\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Le type de `name` est déduit, c\u0026#x27;est un `str`\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp class=\"mb-4\"\u003esauf si vous utilisez un alias :\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-py hljs mb-4 rounded-sm\"\u003eToken = \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\ntoken: Token = \u003cspan class=\"hljs-string\"\u003e\u0026quot;12345678\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Le type a été explicité car il ne pouvait être déduit\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp class=\"mb-4\"\u003eVous n\u0026#39;aurez pas non plus systématiquement besoin de typer les retours de fonctions :\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-py hljs mb-4 rounded-sm\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emultiply\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003earg1: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e, arg2: \u003cspan class=\"hljs-built_in\"\u003eint\u003c/span\u003e\u003c/span\u003e): \u003cspan class=\"hljs-comment\"\u003e# Le type du retour est déduit, c\u0026#x27;est un `int`\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e arg1 * arg2\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp class=\"mb-4\"\u003eEn fait, les seuls moments où ça va s\u0026#39;avérer obligatoire, c\u0026#39;est lorsqu\u0026#39;on va devoir passer par de la définition de structures (telles que les \u003ccode\u003edataclass\u003c/code\u003e) ou que les types sont trop ambigus ou inexistants, donc impossibles à déduire.\u003c/p\u003e\n        \u003ch2 class=\"text-3xl text-primary mb-4\"\u003e\n          Des tas d\u0026#39;outils pratiques pour travailler avec les types\n        \u003c/h2\u003e\u003cp class=\"mb-4\"\u003eEn quelques années, la communauté a eu le temps de mettre au point des outils pour se faciliter la vie.\u003cbr\u003eSachant qu\u0026#39;il arrive souvent qu\u0026#39;on utilise une bibliothèque non typée, certains outils peuvent s\u0026#39;avérer particulièrement intéressants puisqu\u0026#39;ils peuvent générer les types en lisant le code : ce sont des générateurs de types.\nEn voici un échantillon :\u003c/p\u003e\u003cul class=\"mb-4 list-disc pl-6\"\u003e\u003cli\u003e\u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"http://mypy-lang.org/\"\u003emypy\u003c/a\u003e, outil d\u0026#39;analyse statique, générateur de types\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://pyre-check.org/\"\u003ePyre\u003c/a\u003e, outil d\u0026#39;analyse statique, générateur de types\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://github.com/microsoft/pyright\"\u003ePyright\u003c/a\u003e, outil d\u0026#39;analyse statique, générateur de types + \u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://github.com/microsoft/pylance-release\"\u003ePylance\u003c/a\u003e, son extension VS Code\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"text-primary underline underline-offset-1\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" href=\"https://github.com/Instagram/MonkeyType\"\u003eMonkeyType\u003c/a\u003e, générateur de types\u003c/li\u003e\n\u003c/ul\u003e\u003chr class=\"!my-6 m-auto text-primary max-w-screen-md\"/\u003e\u003cp class=\"mb-4\"\u003eLes annotations en Python ne servent qu\u0026#39;à un seul objectif : \u003cstrong\u003erendre le code plus clair, plus explicite\u003c/strong\u003e. Il n\u0026#39;a \u003cem\u003epas le moindre effet bénéfique lors de son exécution\u003c/em\u003e et n\u0026#39;améliore en rien ses performances (les imports des types vont plutôt les réduire de manière \u003cem\u003enégligeable\u003c/em\u003e). Bien que leur introduction remonte à 2014, les annotations de type de Python ne sont pas aussi approfondies que ce qu\u0026#39;on pourrait trouver avec TypeScript ou Rust et on peut rapidement se retrouver limité, par exemple avec les types génériques.\u003c/p\u003e\u003cp class=\"mb-4\"\u003eLe point final n\u0026#39;est pas de trancher sur le fait de favoriser un langage à typage statique par rapport à un langage à typage dynamique. A travers cette fonctionnalité, Python se rend plus versatile et, à mon avis, \u003cstrong\u003eplus facile à maintenir\u003c/strong\u003e dans de grosses applications et ce avec un excellent compromis temps/information grâce à la déduction de type. \u003c/p\u003e\u003cp class=\"mb-4\"\u003eUtilisez-vous les annotations de type dans vos projets Python ? Si non, qu\u0026#39;est-ce qui vous ferait changer d\u0026#39;avis ? \u003cbr\u003eAu contraire, voyez-vous des inconvénients majeurs contre leur utilisation ?\u003c/p\u003e"},"__N_SSG":true},"page":"/technos/articles/[slug]","query":{"slug":"typage-python"},"buildId":"2cIfnXbK-LN1ukIOQ7QcV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>